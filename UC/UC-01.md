# UC-01 : Регистрация и создание профиля

### Название сценария

Регистрация и создание профиля

### Краткое описание

Новый пользователь регистрируется в приложении и создает профиль с личной информацией.

### Действующие лица

Пользователь, Приложение

### Предварительные условия

- Пользователь установил приложение на своем устройстве.
- Пользователь не зарегистрирован в системе.
- У пользователя есть доступ к сети Интернет.

### Постусловия

- Пользователь зарегистрирован в системе.
- Создан профиль пользователя.
- Пользователь залогинен в приложение.
- Токен аутентификации сохранен на устройстве пользователя.

### Основной поток

1. Пользователь запускает приложение на своем устройстве.
2. Приложение отображает экран регистрации.
3. Пользователь выбирает опцию "Регистрация".
4. Приложение запрашивает у пользователя email, пароль и подтверждение согласия с условиями использования.
5. Пользователь вводит запрошенные данные и соглашается с условиями использования.
6. Приложение проводит базовую валидацию данных (например, формат email).
7. Приложение отправляет запрос на регистрацию в сервис аутентификации (AuthService).
8. Сервис аутентификации проверяет формат email и наличие такого email в базе данных.
9. Если email свободен, сервис аутентификации хеширует пароль.
10. Сервис аутентификации создает нового пользователя в базе данных пользователей (UserDB).
11. Сервис аутентификации отправляет письмо с подтверждением email на указанный адрес.
12. Приложение отображает пользователю сообщение об отправке письма с подтверждением.
13. Пользователь переходит по ссылке подтверждения, содержащейся в письме.
14. Приложение отправляет запрос на подтверждение email в сервис аутентификации.
15. Сервис аутентификации помечает email пользователя как подтвержденный в базе данных пользователей (UserDB).
16. Приложение отображает экран входа.
17. Пользователь входит в приложение, используя зарегистрированный email и пароль.
18. Приложение отправляет запрос на аутентификацию в сервис аутентификации (AuthService).
19. Сервис аутентификации проверяет email и пароль пользователя в базе данных пользователей (UserDB).
20. В случае успешной аутентификации, сервис аутентификации возвращает токен аутентификации приложению.
21. Приложение отправляет запрос на создание профиля в сервис профилей (ProfileService).
22. Сервис профилей запрашивает у приложения информацию о профиле пользователя (имя, возраст, пол, рост, вес, цель, уровень подготовки и предпочтения).
23. Пользователь вводит запрошенную информацию о профиле.
24. Приложение отправляет данные профиля в сервис профилей.
25. Сервис профилей проводит валидацию полученных данных.
26. Сервис профилей сохраняет профиль пользователя в базе данных профилей (ProfileDB).
27. Приложение предлагает пользователю загрузить фото профиля (опционально).
28. Пользователь загружает фото профиля.
29. Приложение отправляет фото профиля в сервис профилей, который обновляет профиль пользователя в базе данных профилей (ProfileDB).
30. Приложение отображает профиль пользователя.

### Альтернативные потоки

1. Неверный формат email: Если пользователь вводит email в неверном формате, приложение отображает сообщение об ошибке и предлагает ввести действительный email.
2. Email уже зарегистрирован: Если пользователь пытается зарегистрироваться с email, который уже существует в базе данных, приложение отображает сообщение об ошибке и предлагает использовать другой email или восстановить пароль.
3. Не удалось отправить письмо: Если не удается отправить письмо с подтверждением, приложение отображает сообщение об ошибке и предлагает запросить повторную отправку.
4. Неудачная аутентификация: Если введен неверный email или пароль при входе, приложение отображает сообщение об ошибке.



