# ADR-03: Выбор системы обмена сообщениями: Kafka

### Статус

Принято

### Контекст

- Некоторые операции не требуют немедленного ответа и могут быть выполнены асинхронно (например, отправка уведомлений, обработка данных с фитнес-трекеров, обновление рекомендаций).
- Необходимо обеспечить надежную доставку сообщений, даже в случае сбоев.
- Предполагается большое количество сообщений, генерируемых различными сервисами.
- Необходимо обеспечить возможность масштабирования системы обмена сообщениями.
- Рассматривались альтернативные системы (RabbitMQ, AWS SQS), но Kafka была выбрана из-за более высокой пропускной способности, масштабируемости и отказоустойчивости.

### Решение

- Использовать Kafka в качестве системы обмена сообщениями для асинхронного взаимодействия между сервисами.
- Определить четкие правила для организации топиков и разделов Kafka.
- Использовать схемы Avro или Protocol Buffers для сериализации сообщений.
- Настроить мониторинг Kafka для отслеживания производительности и выявления проблем.

### Последствия

(+) Высокая пропускная способность и масштабируемость.

(+) Отказоустойчивость и надежность.

(-) Сложность настройки и управления.

(-) Требует отдельной инфраструктуры.