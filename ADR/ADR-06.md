# ADR-06: Выбор стратегии аутентификации и авторизации: JWT

### Статус

Принято

### Контекст

- Необходимо обеспечить безопасный доступ к API.
- Необходимо идентифицировать пользователей и проверять их права доступа к ресурсам.
- Необходимо избежать хранения информации о сессиях на сервере (для обеспечения масштабируемости).
- Требуется широкая поддержка различных языков программирования и платформ.
- Рассматривались альтернативные стратегии (OAuth 2.0), но JWT был выбран из-за своей простоты и stateless nature.

### Решение

- Использовать JSON Web Tokens (JWT) для аутентификации и авторизации.
- При аутентификации пользователя генерировать JWT, содержащий информацию о пользователе и его правах доступа.
- При каждом запросе к API клиент должен предоставлять JWT в заголовке Authorization.
- API Gateway или микросервис проверяет подпись JWT и права доступа пользователя.
- Реализовать механизм ротации ключей для обеспечения безопасности.

### Последствия

(+) Без сохранения состояния (stateless), легко масштабируется.

(+) Широкая поддержка и простота использования.

(-) Требует ротации ключей и управления ими.

(-) Отзыв токенов может быть сложным (при необходимости мгновенного отзыва).